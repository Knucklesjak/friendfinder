<!DOCTYPE html>
<html>
<head>
	<title>Timid - An Exercise in Futility</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<!-- Link static CSS -->
	<link rel="stylesheet" type="text/css" href="/style.css">
	<link href="https://fonts.googleapis.com/css?family=Baloo|Roboto" rel="stylesheet">
</head>
<body>
	<div class="container content">
		<h1>Survey</h1>
		<p>Answer these questions to find your perfect match. You know, if one even exists. If you really, totally disagree with the statement, your answer should be 1. If you feel the statement perfectly describes you, your answer should be 5.</p>
		<form>
			<div class="form-group">
				<input id="name" type="text" class="form-control" placeholder="Name (Required)">
			</div>
			<div class="form-group">
				<input id="photo" type="text" class="form-control" placeholder="Link to Profile Photo (Required)">
			</div>
			<div class="form-group">
				<label for="question1">Life is a constant stream of misery.</label>
				<select class="form-control" id="question1">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question2">I feel perpetually bummed out.</label>
				<select class="form-control" id="question2">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question3">The stuff you're most proud of aint worth being proud of.</label>
				<select class="form-control" id="question3">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question4">My motto is "No life. No hope. No future".</label>
				<select class="form-control" id="question4">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question5">The harder I try, the worse I get.</label>
				<select class="form-control" id="question5">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question6">Dancing is something you do alone, in your room, at three in the morning.</label>
				<select class="form-control" id="question6">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question7">It's okay to live with your parents as a fully functioning adult.</label>
				<select class="form-control" id="question7">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question8">I thinkn cats are better than dogs.</label>
				<select class="form-control" id="question8">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question9">The world is out to get me.</label>
				<select class="form-control" id="question9">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="question10">Donald Trump is my role model.</label>
				<select class="form-control" id="question10">
					<option value="empty"></option>
					<option value="1">1 (Good grief, you're not even close)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Yup, pretty much!)</option>
				</select>
			</div>
		</form>
		<div class="text-center">
			<button id="submitBtn" type="submit" class="btn btn-success btn-lg">Submit</button>
		</div>
		
		<!-- This modal will display the user's match -->
		<div id="bestFriendModal" class="modal fade" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h3 class="modal-title">Your New Partner in Misery</h1>
					</div>
					<div class="modal-body">
						<h2 id="bestFriend"></h2>
						<img id="bestFriendPhoto" src="#">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<footer>
		<div class="container">
			<a href="/api/friends">Discover The Person You Probably Won't Stay With</a>
			<span>|</span>
			<a href="https://github.com/Knucklesjak/friendfinder">GitHub Repo</a>
		</div>
	</footer>

	<script
	  src="https://code.jquery.com/jquery-3.2.1.min.js"
	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	  crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>

<script type="text/javascript">
	$("#submitBtn").on("click", function(event) {
		event.preventDefault();
		// Form validation section. I believe there is a shorter/cleaner way to write this but I could not get alternatives to work. 
		var valid = true;
		if($("#name").val() === "" || $("#photo").val() === "") {
			valid = false;
		} else if($("#question1").val() === "empty" || $("#question2").val() === "empty" || $("#question3").val() === "empty" || $("#question4").val() === "empty" || $("#question5").val() === "empty" || $("#question6").val() === "empty" || $("#question7").val() === "empty" || $("#question8").val() === "empty" || $("#question9").val() === "empty" || $("#question10").val() === "empty") {
			valid = false;
		}
		if(valid === true) {
			var newUser = {
				name: $("#name").val().trim(),
				photo: $("#photo").val().trim(),
				scores: [
					$("#question1").val(),
					$("#question2").val(),
					$("#question3").val(),
					$("#question4").val(),
					$("#question5").val(),
					$("#question6").val(),
					$("#question7").val(),
					$("#question8").val(),
					$("#question9").val(),
					$("#question10").val()
				]
			};
			var currentURL = window.location.origin;
			
			$.post(currentURL + "/api/friends", newUser, function(data) {
				$("#bestFriend").text(data.name);
				$("#bestFriendPhoto").attr("src", data.photo);
				$("#bestFriendModal").modal("toggle");
			});
		} else {
			// Error message if required information is not supplied.
			alert("Can't You Follow Directions?! You're survey is not complete.");
		}
	});
</script>